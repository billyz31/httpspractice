# Coolify VPS Setup Guide

<details>
<summary>Coolify Private Key</summary>

```
-----BEGIN OPENSSH PRIVATE KEY-----
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
-----END OPENSSH PRIVATE KEY-----
```

</details>

## 1. Coolify User Setup

### 1.1. Create User

- Log in to the VPS as `root`.
- Run `adduser --disabled-password --gecos "" coolify` to create the `coolify` user.

### 1.2. Configure Passwordless Sudo

- Run `adduser coolify sudo` to add the `coolify` user to the `sudo` group.
- Run `echo 'coolify ALL=(ALL) NOPASSWD:ALL' > /etc/sudoers.d/coolify` to set up passwordless `sudo`.

### 1.3. Set Up SSH Key Authentication for User

- Generate an SSH key pair locally (if one doesn't already exist).
- Copy the contents of the local public key (`~/.ssh/id_rsa.pub`) to the `~/.ssh/authorized_keys` file on the VPS for the `coolify` user.
- Set permissions for the `~/.ssh` directory to `700`.
- Set permissions for the `~/.ssh/authorized_keys` file to `600`.

## 2. Root User SSH Configuration for Coolify

To allow Coolify to manage the server, SSH key-based authentication must be configured for the `root` user.

- Create the `.ssh` directory for the `root` user and set the correct permissions: `sudo mkdir -p /root/.ssh && sudo chmod 700 /root/.ssh`
- Add the Coolify service's public key to the `root` user's `authorized_keys` file: `sudo sh -c 'cat /home/coolify/.ssh/coolify.pub >> /root/.ssh/authorized_keys'`
- Set the permissions for the `authorized_keys` file: `sudo chmod 600 /root/.ssh/authorized_keys`

## 3. Coolify Installation

### 2.1. Run Installation Script

The following command was used to install Coolify on the VPS:

```bash
curl -fsSL https://cdn.coollabs.io/coolify/install.sh | sudo bash
```

### 2.2. Accessing Coolify

You can access the Coolify instance via the following URLs:

- **IPv4:** http://72.60.198.67:8000
- **IPv6:** http://[2a02:4780:5e:3ed::1]:8000

## 3. Coolify Service Configuration

### 3.1. Set Up Dedicated SSH Private Key for the Service

- Generate a new SSH key pair on the VPS for the Coolify service: `ssh-keygen -t rsa -b 4096 -f /home/coolify/.ssh/coolify -N ''`
- Set the permissions and ownership of the private key: `sudo chown coolify:coolify /home/coolify/.ssh/coolify && sudo chmod 600 /home/coolify/.ssh/coolify`
